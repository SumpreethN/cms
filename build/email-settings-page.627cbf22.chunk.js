"use strict";(self.webpackChunkcmssample=self.webpackChunkcmssample||[]).push([[1495],{91043:(Y,c,t)=>{t.r(c),t.d(c,{default:()=>N});var e=t(27279),M=t(9941),T=t(27875),C=t(74758),r=t(10701),P=t(93415),m=t(21395),p=t(23298),n=t(74577),g=t(12881),I=t(5627),x=t(78955),L=t(48102),l=t(57537),R=t(16543),b=t(61020),f=t(40464),A=t(72450),F=t(31350),h=t(47853);const v=h.Ry().shape({email:h.Z_().email(l.translatedErrors.email).required(l.translatedErrors.required)}),B=A.default.a`
  color: ${({theme:d})=>d.colors.primary600};
`,Z=()=>e.createElement(l.CheckPagePermissions,{permissions:F._.settings},e.createElement(D,null)),D=()=>{const d=(0,l.useNotification)(),{formatMessage:a}=(0,b.Z)(),{lockApp:G,unlockApp:O}=(0,l.useOverlayBlocker)(),{get:V,post:W}=(0,l.useFetchClient)(),{data:o,isLoading:E}=(0,f.useQuery)(["email","settings"],async()=>{const{data:{config:i}}=await V("/email/settings");return i}),u=(0,f.useMutation)(i=>W("/email/test",i),{onError(){d({type:"warning",message:a({id:"email.Settings.email.plugin.notification.test.error",defaultMessage:"Failed to send a test mail to {to}"},{to:s})})},onSuccess(){d({type:"success",message:a({id:"email.Settings.email.plugin.notification.test.success",defaultMessage:"Email test succeeded, check the {to} mailbox"},{to:s})})}},{retry:!1});(0,l.useFocusWhenNavigate)();const[S,$]=e.useState({}),[s,j]=e.useState(""),[k,y]=e.useState(!1);e.useEffect(()=>{v.validate({email:s},{abortEarly:!1}).then(()=>y(!0)).catch(()=>y(!1))},[s]);const z=i=>{j(()=>i.target.value)},H=async i=>{i.preventDefault();try{await v.validate({email:s},{abortEarly:!1})}catch(Q){$((0,l.getYupInnerErrors)(Q))}G(),u.mutate({to:s}),O()};return e.createElement(M.o,{labelledBy:"title","aria-busy":E||u.isLoading},e.createElement(l.SettingsPageTitle,{name:a({id:"email.Settings.email.plugin.title",defaultMessage:"Configuration"})}),e.createElement(T.T,{id:"title",title:a({id:"email.Settings.email.plugin.title",defaultMessage:"Configuration"}),subtitle:a({id:"email.Settings.email.plugin.subTitle",defaultMessage:"Test the settings for the Email plugin"})}),e.createElement(C.D,null,E?e.createElement(l.LoadingIndicatorPage,null):e.createElement("form",{onSubmit:H},e.createElement(r.k,{direction:"column",alignItems:"stretch",gap:7},e.createElement(P.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(r.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(r.k,{direction:"column",alignItems:"stretch",gap:1},e.createElement(m.Z,{variant:"delta",as:"h2"},a({id:"email.Settings.email.plugin.title.config",defaultMessage:"Configuration"})),e.createElement(m.Z,null,a({id:"email.Settings.email.plugin.text.configuration",defaultMessage:"The plugin is configured through the {file} file, checkout this {link} for the documentation."},{file:"./config/plugins.js",link:e.createElement(B,{href:"https://docs.strapi.io/developer-docs/latest/plugins/email.html",target:"_blank",rel:"noopener noreferrer"},a({id:"email.link",defaultMessage:"Link"}))}))),e.createElement(p.r,{gap:5},e.createElement(n.P,{col:6,s:12},e.createElement(g.o,{name:"shipper-email",label:a({id:"email.Settings.email.plugin.label.defaultFrom",defaultMessage:"Default sender email"}),placeholder:a({id:"email.Settings.email.plugin.placeholder.defaultFrom",defaultMessage:"ex: Strapi No-Reply '<'no-reply@strapi.io'>'"}),disabled:!0,onChange:()=>{},value:o.settings.defaultFrom})),e.createElement(n.P,{col:6,s:12},e.createElement(g.o,{name:"response-email",label:a({id:"email.Settings.email.plugin.label.defaultReplyTo",defaultMessage:"Default response email"}),placeholder:a({id:"email.Settings.email.plugin.placeholder.defaultReplyTo",defaultMessage:"ex: Strapi '<'example@strapi.io'>'"}),disabled:!0,onChange:()=>{},value:o.settings.defaultReplyTo})),e.createElement(n.P,{col:6,s:12},e.createElement(I.P,{name:"email-provider",label:a({id:"email.Settings.email.plugin.label.provider",defaultMessage:"Email provider"}),disabled:!0,onChange:()=>{},value:o.provider},e.createElement(x.W,{value:o.provider},o.provider)))))),e.createElement(r.k,{alignItems:"stretch",background:"neutral0",direction:"column",gap:4,hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(m.Z,{variant:"delta",as:"h2"},a({id:"email.Settings.email.plugin.title.test",defaultMessage:"Test email delivery"})),e.createElement(p.r,{gap:5,alignItems:"end"},e.createElement(n.P,{col:6,s:12},e.createElement(g.o,{id:"test-address-input",name:"test-address",onChange:z,label:a({id:"email.Settings.email.plugin.label.testAddress",defaultMessage:"Recipient email"}),value:s,error:S.email?.id&&a({id:`email.${S.email?.id}`,defaultMessage:"This is an invalid email"}),placeholder:a({id:"email.Settings.email.plugin.placeholder.testAddress",defaultMessage:"ex: developer@example.com"})})),e.createElement(n.P,{col:7,s:12},e.createElement(L.z,{loading:u.isLoading,disabled:!k,type:"submit",startIcon:e.createElement(R.Z,null)},a({id:"email.Settings.email.plugin.button.test-email",defaultMessage:"Send test email"})))))))))},N=Z}}]);
