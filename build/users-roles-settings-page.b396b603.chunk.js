(self.webpackChunkcmssample=self.webpackChunkcmssample||[]).push([[8853],{26302:(p,x,t)=>{"use strict";t.r(x),t.d(x,{default:()=>bt});var e=t(27279),n=t(57537),r=t(51447),o=t(84419),i=t(9941),m=t(27875),g=t(48102),R=t(74758),f=t(10701),h=t(21395),b=t(23298),C=t(74577),j=t(12881),$=t(39708),I=t(59082),O=t(71563),S=t(61020),k=t(40464),N=t(70627),T=t.n(N);const z=(0,e.createContext)({}),ne=({children:s,value:a})=>e.createElement(z.Provider,{value:a},s),q=()=>(0,e.useContext)(z);ne.propTypes={children:T().node.isRequired,value:T().object.isRequired};var H=t(58655),Ce=t(45322),Re=t(24920),Pe=t(34642),xe=t(51943),be=t.n(xe);function Ae(s){switch(s){case"application":return"Application";case"plugin::content-manager":return"Content manager";case"plugin::content-type-builder":return"Content types builder";case"plugin::documentation":return"Documentation";case"plugin::email":return"Email";case"plugin::i18n":return"i18n";case"plugin::upload":return"Upload";case"plugin::users-permissions":return"Users-permissions";default:return be()(s.replace("api::","").replace("plugin::",""))}}const Te=Ae,Me=(s,a)=>{const l=Object.keys(a).sort().map(c=>({name:c,isOpen:!1}));return{...s,collapses:l}};var U=t(93415),Se=t(51006),se=t.n(Se),ae=t(22572),re=t(10989),Le=t(35318),De=t(98934),K=t.n(De),X=t(72450);const oe=(0,X.css)`
  background: ${s=>s.theme.colors.primary100};
  svg {
    opacity: 1;
  }
`,Oe=(0,X.default)(U.x)`
  display: flex;
  justify-content: space-between;
  align-items: center;

  svg {
    opacity: 0;
    path {
      fill: ${s=>s.theme.colors.primary600};
    }
  }

  /* Show active style both on hover and when the action is selected */
  ${s=>s.isActive&&oe}
  &:hover {
    ${oe}
  }
`,Ze=X.default.div`
  flex: 1;
  align-self: center;
  border-top: 1px solid ${({theme:s})=>s.colors.neutral150};
`,ie=({subCategory:s})=>{const{formatMessage:a}=(0,S.Z)(),{onChange:l,onChangeSelectAll:c,onSelectedAction:E,selectedAction:d,modifiedData:y}=q(),P=(0,e.useMemo)(()=>K()(y,s.name,{}),[y,s]),v=(0,e.useMemo)(()=>Object.values(P).every(u=>u.enabled===!0),[P]),A=(0,e.useMemo)(()=>Object.values(P).some(u=>u.enabled===!0)&&!v,[P,v]),M=(0,e.useCallback)(({target:{name:u}})=>{c({target:{name:u,value:!v}})},[v,c]),L=(0,e.useCallback)(u=>d===u,[d]);return e.createElement(U.x,null,e.createElement(f.k,{justifyContent:"space-between",alignItems:"center"},e.createElement(U.x,{paddingRight:4},e.createElement(h.Z,{variant:"sigma",textColor:"neutral600"},s.label)),e.createElement(Ze,null),e.createElement(U.x,{paddingLeft:4},e.createElement(ae.X,{name:s.name,value:v,onValueChange:u=>M({target:{name:s.name,value:u}}),indeterminate:A},a({id:"app.utils.select-all",defaultMessage:"Select all"})))),e.createElement(f.k,{paddingTop:6,paddingBottom:6},e.createElement(b.r,{gap:2,style:{flex:1}},s.actions.map(u=>{const D=`${u.name}.enabled`;return e.createElement(C.P,{col:6,key:u.name},e.createElement(Oe,{isActive:L(u.name),padding:2,hasRadius:!0},e.createElement(ae.X,{value:K()(y,D,!1),name:D,onValueChange:B=>l({target:{name:D,value:B}})},u.label),e.createElement("button",{type:"button",onClick:()=>E(u.name),style:{display:"inline-flex",alignItems:"center"}},e.createElement(re.T,{as:"span"},a({id:"app.utils.show-bound-route",defaultMessage:"Show bound route for {route}"},{route:u.name})),e.createElement(Le.Z,null))))}))))};ie.propTypes={subCategory:T().object.isRequired};const Be=ie,le=({name:s,permissions:a})=>{const l=(0,e.useMemo)(()=>se()(Object.values(a.controllers).reduce((c,E,d)=>{const y=`${s}.controllers.${Object.keys(a.controllers)[d]}`,P=se()(Object.keys(E).reduce((v,A)=>[...v,{...E[A],label:A,name:`${y}.${A}`}],[]),"label");return[...c,{actions:P,label:Object.keys(a.controllers)[d],name:y}]},[]),"label"),[s,a]);return e.createElement(U.x,{padding:6},l.map(c=>e.createElement(Be,{key:c.name,subCategory:c})))};le.propTypes={name:T().string.isRequired,permissions:T().object.isRequired};const Ne=le;var ce=t(61815);const ke={collapses:[]},$e=(s,a)=>(0,ce.ZP)(s,l=>{switch(a.type){case"TOGGLE_COLLAPSE":{l.collapses=s.collapses.map((c,E)=>E===a.index?{...c,isOpen:!c.isOpen}:{...c,isOpen:!1});break}default:return l}}),Ie=()=>{const{modifiedData:s}=q(),{formatMessage:a}=(0,S.Z)(),[{collapses:l},c]=(0,e.useReducer)($e,ke,d=>Me(d,s)),E=d=>c({type:"TOGGLE_COLLAPSE",index:d});return e.createElement(f.k,{direction:"column",alignItems:"stretch",gap:1},l.map((d,y)=>e.createElement(Ce.U,{expanded:d.isOpen,onToggle:()=>E(y),key:d.name,variant:y%2===0?"secondary":void 0},e.createElement(Re.B,{title:Te(d.name),description:a({id:"users-permissions.Plugin.permissions.plugins.description",defaultMessage:"Define all allowed actions for the {name} plugin."},{name:d.name}),variant:y%2?"primary":"secondary"}),e.createElement(Pe.v,null,e.createElement(Ne,{permissions:s[d.name],name:d.name})))))};var Fe=t(10124),je=t.n(Fe),Ue=t(87366),Ge=t.n(Ue),We=t(58422),He=t.n(We),Ve=t(34049),Qe=t.n(Ve);const ze=s=>{switch(s){case"POST":return{text:"success600",border:"success200",background:"success100"};case"GET":return{text:"secondary600",border:"secondary200",background:"secondary100"};case"PUT":return{text:"warning600",border:"warning200",background:"warning100"};case"DELETE":return{text:"danger600",border:"danger200",background:"danger100"};default:return{text:"neutral600",border:"neutral200",background:"neutral100"}}},Xe=(0,X.default)(U.x)`
  margin: -1px;
  border-radius: ${({theme:s})=>s.spaces[1]} 0 0 ${({theme:s})=>s.spaces[1]};
`;function _({route:s}){const{formatMessage:a}=(0,S.Z)(),{method:l,handler:c,path:E}=s,d=E?Qe()(E.split("/")):[],[y="",P=""]=c?c.split("."):[],v=ze(s.method);return e.createElement(f.k,{direction:"column",alignItems:"stretch",gap:2},e.createElement(h.Z,{variant:"delta",as:"h3"},a({id:"users-permissions.BoundRoute.title",defaultMessage:"Bound route to"}),"\xA0",e.createElement("span",null,y),e.createElement(h.Z,{variant:"delta",textColor:"primary600"},".",P)),e.createElement(f.k,{hasRadius:!0,background:"neutral0",borderColor:"neutral200",gap:0},e.createElement(Xe,{background:v.background,borderColor:v.border,padding:2},e.createElement(h.Z,{fontWeight:"bold",textColor:v.text},l)),e.createElement(U.x,{paddingLeft:2,paddingRight:2},He()(d,A=>e.createElement(h.Z,{key:A,textColor:A.includes(":")?"neutral600":"neutral900"},"/",A)))))}_.defaultProps={route:{handler:"Nocontroller.error",method:"GET",path:"/there-is-no-path"}},_.propTypes={route:T().shape({handler:T().string,method:T().string,path:T().string})};const Ye=_,Ke=()=>{const{formatMessage:s}=(0,S.Z)(),{selectedAction:a,routes:l}=q(),c=Ge()(a.split("."),"controllers"),E=K()(l,c[0]),d=c.slice(1).join("."),y=je()(E)?[]:E.filter(P=>P.handler.endsWith(d));return e.createElement(C.P,{col:5,background:"neutral150",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,style:{minHeight:"100%"}},a?e.createElement(f.k,{direction:"column",alignItems:"stretch",gap:2},y.map((P,v)=>e.createElement(Ye,{key:v,route:P}))):e.createElement(f.k,{direction:"column",alignItems:"stretch",gap:2},e.createElement(h.Z,{variant:"delta",as:"h3"},s({id:"users-permissions.Policies.header.title",defaultMessage:"Advanced settings"})),e.createElement(h.Z,{as:"p",textColor:"neutral600"},s({id:"users-permissions.Policies.header.hint",defaultMessage:"Select the application's actions or the plugin's actions and click on the cog icon to display the bound route"}))))},we=(s,a,l)=>({...s,initialData:a,modifiedData:a,routes:l});var Je=t(43433),de=t.n(Je),qe=t(41942),_e=t.n(qe);const et={initialData:{},modifiedData:{},routes:{},selectedAction:"",policies:[]},tt=(s,a)=>(0,ce.ZP)(s,l=>{switch(a.type){case"ON_CHANGE":{const c=a.keys.length,E=a.keys[c-1]==="enabled";if(a.value&&E){const d=_e()(a.keys,c-1).join(".");l.selectedAction=d}de()(l,["modifiedData",...a.keys],a.value);break}case"ON_CHANGE_SELECT_ALL":{const c=["modifiedData",...a.keys],E=K()(s,c,{}),d=Object.keys(E).reduce((y,P)=>(y[P]={...E[P],enabled:a.value},y),{});de()(l,c,d);break}case"ON_RESET":{l.modifiedData=s.initialData;break}case"ON_SUBMIT_SUCCEEDED":{l.initialData=s.modifiedData;break}case"SELECT_ACTION":{const{actionToSelect:c}=a;l.selectedAction=c===s.selectedAction?"":c;break}default:return l}}),ue=(0,e.forwardRef)(({permissions:s,routes:a},l)=>{const{formatMessage:c}=(0,S.Z)(),[E,d]=(0,e.useReducer)(tt,et,M=>we(M,s,a));(0,e.useImperativeHandle)(l,()=>({getPermissions(){return{permissions:E.modifiedData}},resetForm(){d({type:"ON_RESET"})},setFormAfterSubmit(){d({type:"ON_SUBMIT_SUCCEEDED"})}}));const A={...E,onChange:({target:{name:M,value:L}})=>d({type:"ON_CHANGE",keys:M.split("."),value:L==="empty__string_value"?"":L}),onChangeSelectAll:({target:{name:M,value:L}})=>d({type:"ON_CHANGE_SELECT_ALL",keys:M.split("."),value:L}),onSelectedAction:M=>d({type:"SELECT_ACTION",actionToSelect:M})};return e.createElement(ne,{value:A},e.createElement(b.r,{gap:0,shadow:"filterShadow",hasRadius:!0,background:"neutral0"},e.createElement(C.P,{col:7,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(f.k,{direction:"column",alignItems:"stretch",gap:6},e.createElement(f.k,{direction:"column",alignItems:"stretch",gap:2},e.createElement(h.Z,{variant:"delta",as:"h2"},c({id:(0,H.Z)("Plugins.header.title"),defaultMessage:"Permissions"})),e.createElement(h.Z,{as:"p",textColor:"neutral600"},c({id:(0,H.Z)("Plugins.header.description"),defaultMessage:"Only actions bound by a route are listed below."}))),e.createElement(Ie,null))),e.createElement(Ke,null)))});ue.propTypes={permissions:T().object.isRequired,routes:T().object.isRequired};const me=(0,e.memo)(ue);var ee=t(47853);const ge=ee.Ry().shape({name:ee.Z_().required(n.translatedErrors.required),description:ee.Z_().required(n.translatedErrors.required)});var Y=t(99688);const pe=()=>{const s=(0,n.useNotification)(),{get:a}=(0,n.useFetchClient)(),{formatAPIError:l}=(0,n.useAPIErrorHandler)(Y.OB),[{data:c,isLoading:E,error:d,refetch:y},{data:P,isLoading:v,error:A,refetch:M}]=(0,k.useQueries)([{queryKey:["users-permissions","permissions"],async queryFn(){const{data:{permissions:D}}=await a("/users-permissions/permissions");return D}},{queryKey:["users-permissions","routes"],async queryFn(){const{data:{routes:D}}=await a("/users-permissions/routes");return D}}]),L=async()=>{await Promise.all([y(),M()])};(0,e.useEffect)(()=>{d&&s({type:"warning",message:l(d)})},[s,d,l]),(0,e.useEffect)(()=>{A&&s({type:"warning",message:l(A)})},[s,A,l]);const u=E||v;return{permissions:c?(0,Y.YX)(c):{},routes:P??{},getData:L,isLoading:u}},nt=()=>{const{formatMessage:s}=(0,S.Z)(),a=(0,n.useNotification)(),{goBack:l}=(0,r.k6)(),{lockApp:c,unlockApp:E}=(0,n.useOverlayBlocker)(),{isLoading:d,permissions:y,routes:P}=pe(),{trackUsage:v}=(0,n.useTracking)(),A=e.useRef(),{post:M}=(0,n.useFetchClient)(),L=(0,k.useMutation)(D=>M("/users-permissions/roles",D),{onError(){a({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})},onSuccess(){v("didCreateRole"),a({type:"success",message:{id:(0,H.Z)("Settings.roles.created"),defaultMessage:"Role created"}}),l()}}),u=async D=>{c();const B=A.current.getPermissions();await L.mutate({...D,...B,users:[]}),E()};return e.createElement(i.o,null,e.createElement(n.SettingsPageTitle,{name:"Roles"}),e.createElement(O.Formik,{enableReinitialize:!0,initialValues:{name:"",description:""},onSubmit:u,validationSchema:ge},({handleSubmit:D,values:B,handleChange:V,errors:Z})=>e.createElement(n.Form,{noValidate:!0,onSubmit:D},e.createElement(m.T,{primaryAction:!d&&e.createElement(g.z,{type:"submit",loading:L.isLoading,startIcon:e.createElement(I.Z,null)},s({id:"global.save",defaultMessage:"Save"})),title:s({id:"Settings.roles.create.title",defaultMessage:"Create a role"}),subtitle:s({id:"Settings.roles.create.description",defaultMessage:"Define the rights given to the role"})}),e.createElement(R.D,null,e.createElement(f.k,{background:"neutral0",direction:"column",alignItems:"stretch",gap:7,hasRadius:!0,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,shadow:"filterShadow"},e.createElement(f.k,{direction:"column",alignItems:"stretch"},e.createElement(h.Z,{variant:"delta",as:"h2"},s({id:(0,H.Z)("EditPage.form.roles"),defaultMessage:"Role details"})),e.createElement(b.r,{gap:4},e.createElement(C.P,{col:6},e.createElement(j.o,{name:"name",value:B.name||"",onChange:V,label:s({id:"global.name",defaultMessage:"Name"}),error:Z?.name?s({id:Z.name,defaultMessage:"Name is required"}):!1,required:!0})),e.createElement(C.P,{col:6},e.createElement($.g,{id:"description",value:B.description||"",onChange:V,label:s({id:"global.description",defaultMessage:"Description"}),error:Z?.description?s({id:Z.description,defaultMessage:"Description is required"}):!1,required:!0})))),!d&&e.createElement(me,{ref:A,permissions:y,routes:P}))))))},st=()=>e.createElement(n.CheckPagePermissions,{permissions:o._.createRole},e.createElement(nt,null));var at=t(76827);const rt=()=>{const{formatMessage:s}=(0,S.Z)(),a=(0,n.useNotification)(),{lockApp:l,unlockApp:c}=(0,n.useOverlayBlocker)(),{params:{id:E}}=(0,r.$B)("/settings/users-permissions/roles/:id"),{get:d}=(0,n.useFetchClient)(),{isLoading:y,routes:P}=pe(),{data:v,isLoading:A,refetch:M}=(0,k.useQuery)(["users-permissions","role",E],async()=>{const{data:{role:Z}}=await d(`/users-permissions/roles/${E}`);return Z}),L=e.useRef(),{put:u}=(0,n.useFetchClient)(),{formatAPIError:D}=(0,n.useAPIErrorHandler)(),B=(0,k.useMutation)(Z=>u(`/users-permissions/roles/${E}`,Z),{onError(Z){a({type:"warning",message:D(Z)})},async onSuccess(){a({type:"success",message:{id:(0,H.Z)("Settings.roles.created"),defaultMessage:"Role edited"}}),await M()}}),V=async Z=>{l();const G=L.current.getPermissions();await B.mutate({...Z,...G,users:[]}),c()};return A?e.createElement(n.LoadingIndicatorPage,null):e.createElement(i.o,null,e.createElement(n.SettingsPageTitle,{name:"Roles"}),e.createElement(O.Formik,{enableReinitialize:!0,initialValues:{name:v.name,description:v.description},onSubmit:V,validationSchema:ge},({handleSubmit:Z,values:G,handleChange:w,errors:Q})=>e.createElement(n.Form,{noValidate:!0,onSubmit:Z},e.createElement(m.T,{primaryAction:!y&&e.createElement(g.z,{disabled:v.code==="strapi-super-admin",type:"submit",loading:B.isLoading,startIcon:e.createElement(I.Z,null)},s({id:"global.save",defaultMessage:"Save"})),title:v.name,subtitle:v.description,navigationAction:e.createElement(n.Link,{startIcon:e.createElement(at.Z,null),to:"/settings/users-permissions/roles"},s({id:"global.back",defaultMessage:"Back"}))}),e.createElement(R.D,null,e.createElement(f.k,{background:"neutral0",direction:"column",alignItems:"stretch",gap:7,hasRadius:!0,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,shadow:"filterShadow"},e.createElement(f.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(h.Z,{variant:"delta",as:"h2"},s({id:(0,H.Z)("EditPage.form.roles"),defaultMessage:"Role details"})),e.createElement(b.r,{gap:4},e.createElement(C.P,{col:6},e.createElement(j.o,{name:"name",value:G.name||"",onChange:w,label:s({id:"global.name",defaultMessage:"Name"}),error:Q?.name?s({id:Q.name,defaultMessage:"Name is required"}):!1,required:!0})),e.createElement(C.P,{col:6},e.createElement($.g,{id:"description",value:G.description||"",onChange:w,label:s({id:"global.description",defaultMessage:"Description"}),error:Q?.description?s({id:Q.description,defaultMessage:"Description is required"}):!1,required:!0})))),!y&&e.createElement(me,{ref:L,permissions:v.permissions,routes:P}))))))},ot=()=>e.createElement(n.CheckPagePermissions,{permissions:o._.updateRole},e.createElement(rt,null));var it=t(51926),lt=t(27997),ct=t(37472),dt=t(70774),ut=t(38101),he=t(93153),F=t(50086),mt=t(36938),gt=t(68412),pt=t(86967),ht=t(4987),ft=t(26784),Et=t(78665);const yt=(0,X.default)(gt.r)`
  align-items: center;
  height: ${(0,n.pxToRem)(32)};
  display: flex;
  justify-content: center;
  padding: ${({theme:s})=>`${s.spaces[2]}}`};
  width: ${(0,n.pxToRem)(32)};

  svg {
    height: ${(0,n.pxToRem)(12)};
    width: ${(0,n.pxToRem)(12)};

    path {
      fill: ${({theme:s})=>s.colors.neutral500};
    }
  }

  &:hover,
  &:focus {
    svg {
      path {
        fill: ${({theme:s})=>s.colors.neutral800};
      }
    }
  }
`,te=({sortedRoles:s,canDelete:a,permissions:l,setRoleToDelete:c,onDelete:E})=>{const{formatMessage:d}=(0,S.Z)(),{push:y}=(0,r.k6)(),[P,v]=E,A=u=>a&&!["public","authenticated"].includes(u.type),M=u=>{c(u),v(!P)},L=u=>{y(`/settings/users-permissions/roles/${u}`)};return e.createElement(pt.p,null,s?.map(u=>e.createElement(he.Tr,{key:u.name,...(0,n.onRowClick)({fn:()=>L(u.id)})},e.createElement(F.Td,{width:"20%"},e.createElement(h.Z,null,u.name)),e.createElement(F.Td,{width:"50%"},e.createElement(h.Z,null,u.description)),e.createElement(F.Td,{width:"30%"},e.createElement(h.Z,null,d({id:"Roles.RoleRow.user-count",defaultMessage:"{number, plural, =0 {# user} one {# user} other {# users}}"},{number:u.nb_users}))),e.createElement(F.Td,null,e.createElement(f.k,{justifyContent:"end",...n.stopPropagation},e.createElement(n.CheckPermissions,{permissions:l.updateRole},e.createElement(yt,{to:`/settings/users-permissions/roles/${u.id}`,"aria-label":d({id:"app.component.table.edit",defaultMessage:"Edit {target}"},{target:`${u.name}`})},e.createElement(ft.Z,null))),A(u)&&e.createElement(n.CheckPermissions,{permissions:l.deleteRole},e.createElement(ht.h,{onClick:()=>M(u.id),noBorder:!0,icon:e.createElement(Et.Z,null),label:d({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${u.name}`})})))))))},vt=te;te.defaultProps={canDelete:!1},te.propTypes={onDelete:T().array.isRequired,permissions:T().object.isRequired,setRoleToDelete:T().func.isRequired,sortedRoles:T().array.isRequired,canDelete:T().bool};const Ct=async(s,a)=>{try{const{get:l}=(0,n.getFetchClient)(),{data:c}=await l("/users-permissions/roles");return a("The roles have loaded successfully"),c}catch(l){throw s({type:"warning",message:{id:"notification.error"}}),new Error(l)}},Rt=async(s,a)=>{try{const{del:l}=(0,n.getFetchClient)();await l(`/users-permissions/roles/${s}`)}catch{a({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}},Pt=()=>{const{trackUsage:s}=(0,n.useTracking)(),{formatMessage:a,locale:l}=(0,S.Z)(),c=(0,n.useNotification)(),{notifyStatus:E}=(0,it.G)(),[{query:d}]=(0,n.useQueryParams)(),y=d?._q||"",[P,v]=(0,e.useState)(!1),[A,M]=(0,e.useState)(!1),[L,u]=(0,e.useState)();(0,n.useFocusWhenNavigate)();const{isLoading:D,allowedActions:{canRead:B,canDelete:V}}=(0,n.useRBAC)({create:o._.createRole,read:o._.readRoles,update:o._.updateRole,delete:o._.deleteRole}),{isLoading:Z,data:{roles:G},isFetching:w,refetch:Q}=(0,k.useQuery)("get-roles",()=>Ct(c,E),{initialData:{},enabled:B}),{includes:fe}=(0,n.useFilter)(l,{sensitivity:"base"}),Ee=(0,n.useCollator)(l,{sensitivity:"base"}),ye=Z||w,At=()=>{v(!P)},Tt={roles:{id:(0,Y.OB)("Roles.empty"),defaultMessage:"You don't have any roles yet."},search:{id:(0,Y.OB)("Roles.empty.search"),defaultMessage:"No roles match the search."}},Mt=a({id:"global.roles",defaultMessage:"Roles"}),St=(0,k.useMutation)(W=>Rt(W,c),{async onSuccess(){await Q()}}),Lt=async()=>{M(!0),await St.mutateAsync(L),v(!P),M(!1)},J=(G||[]).filter(W=>fe(W.name,y)||fe(W.description,y)).sort((W,ve)=>Ee.compare(W.name,ve.name)||Ee.compare(W.description,ve.description)),Dt=y&&!J.length?"search":"roles",Ot=4,Zt=(G?.length||0)+1;return e.createElement(lt.A,null,e.createElement(n.SettingsPageTitle,{name:Mt}),e.createElement(i.o,{"aria-busy":ye},e.createElement(m.T,{title:a({id:"global.roles",defaultMessage:"Roles"}),subtitle:a({id:"Settings.roles.list.description",defaultMessage:"List of roles"}),primaryAction:e.createElement(n.CheckPermissions,{permissions:o._.createRole},e.createElement(n.LinkButton,{to:"/settings/users-permissions/roles/new",onClick:()=>s("willCreateRole"),startIcon:e.createElement(mt.Z,null),size:"S"},a({id:(0,Y.OB)("List.button.roles"),defaultMessage:"Add new role"})))}),e.createElement(ct.Z,{startActions:e.createElement(n.SearchURLQuery,{label:a({id:"app.component.search.label",defaultMessage:"Search"})})}),e.createElement(R.D,null,!B&&e.createElement(n.NoPermissions,null),(ye||D)&&e.createElement(n.LoadingIndicatorPage,null),B&&J&&J?.length?e.createElement(dt.i,{colCount:Ot,rowCount:Zt},e.createElement(ut.h,null,e.createElement(he.Tr,null,e.createElement(F.Th,null,e.createElement(h.Z,{variant:"sigma",textColor:"neutral600"},a({id:"global.name",defaultMessage:"Name"}))),e.createElement(F.Th,null,e.createElement(h.Z,{variant:"sigma",textColor:"neutral600"},a({id:"global.description",defaultMessage:"Description"}))),e.createElement(F.Th,null,e.createElement(h.Z,{variant:"sigma",textColor:"neutral600"},a({id:"global.users",defaultMessage:"Users"}))),e.createElement(F.Th,null,e.createElement(re.T,null,a({id:"global.actions",defaultMessage:"Actions"}))))),e.createElement(vt,{sortedRoles:J,canDelete:V,permissions:o._,setRoleToDelete:u,onDelete:[P,v]})):e.createElement(n.EmptyStateLayout,{content:Tt[Dt]})),e.createElement(n.ConfirmDialog,{isConfirmButtonLoading:A,onConfirm:Lt,onToggleDialog:At,isOpen:P})))},xt=()=>e.createElement(n.CheckPagePermissions,{permissions:o._.accessRoles},e.createElement(Pt,null)),bt=()=>e.createElement(n.CheckPagePermissions,{permissions:o._.accessRoles},e.createElement(r.rs,null,e.createElement(r.AW,{path:"/settings/users-permissions/roles/new",component:st,exact:!0}),e.createElement(r.AW,{path:"/settings/users-permissions/roles/:id",component:ot,exact:!0}),e.createElement(r.AW,{path:"/settings/users-permissions/roles",component:xt,exact:!0}),e.createElement(r.AW,{path:"",component:n.AnErrorOccurred})))},99688:(p,x,t)=>{"use strict";t.d(x,{YX:()=>o,OB:()=>i.Z});var e=t(10124),n=t.n(e);const o=m=>Object.keys(m).reduce((g,R)=>{const f=m[R].controllers,h=Object.keys(f).reduce((b,C)=>(n()(f[C])||(b[C]=f[C]),b),{});return n()(h)||(g[R]={controllers:h}),g},{});var i=t(58655)},67083:(p,x,t)=>{var e=t(62878);function n(r,o){var i=r==null?0:r.length;return!!i&&e(r,o,0)>-1}p.exports=n},65286:p=>{function x(t,e,n){for(var r=-1,o=t==null?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}p.exports=x},19975:(p,x,t)=>{var e=t(44936),n=t(67083),r=t(65286),o=t(36393),i=t(20435),m=t(42435),g=200;function R(f,h,b,C){var j=-1,$=n,I=!0,O=f.length,S=[],k=h.length;if(!O)return S;b&&(h=o(h,i(b))),C?($=r,I=!1):h.length>=g&&($=m,I=!1,h=new e(h));e:for(;++j<O;){var N=f[j],T=b==null?N:b(N);if(N=C||N!==0?N:0,I&&T===T){for(var z=k;z--;)if(h[z]===T)continue e;S.push(N)}else $(h,T,C)||S.push(N)}return S}p.exports=R},1107:(p,x,t)=>{var e=t(84856),n=t(52593),r=n(e);p.exports=r},32652:p=>{function x(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}p.exports=x},62878:(p,x,t)=>{var e=t(32652),n=t(2784),r=t(51425);function o(i,m,g){return m===m?r(i,m,g):e(i,n,g)}p.exports=o},2784:p=>{function x(t){return t!==t}p.exports=x},92403:(p,x,t)=>{var e=t(1107),n=t(47727);function r(o,i){var m=-1,g=n(o)?Array(o.length):[];return e(o,function(R,f,h){g[++m]=i(R,f,h)}),g}p.exports=r},16429:(p,x,t)=>{var e=t(36393),n=t(82393),r=t(90040),o=t(92403),i=t(63135),m=t(20435),g=t(9998),R=t(51339),f=t(26126);function h(b,C,j){C.length?C=e(C,function(O){return f(O)?function(S){return n(S,O.length===1?O[0]:O)}:O}):C=[R];var $=-1;C=e(C,m(r));var I=o(b,function(O,S,k){var N=e(C,function(T){return T(O)});return{criteria:N,index:++$,value:O}});return i(I,function(O,S){return g(O,S,j)})}p.exports=h},63135:p=>{function x(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}p.exports=x},17654:(p,x,t)=>{var e=t(85194);function n(r,o){if(r!==o){var i=r!==void 0,m=r===null,g=r===r,R=e(r),f=o!==void 0,h=o===null,b=o===o,C=e(o);if(!h&&!C&&!R&&r>o||R&&f&&b&&!h&&!C||m&&f&&b||!i&&b||!g)return 1;if(!m&&!R&&!C&&r<o||C&&i&&g&&!m&&!R||h&&i&&g||!f&&g||!b)return-1}return 0}p.exports=n},9998:(p,x,t)=>{var e=t(17654);function n(r,o,i){for(var m=-1,g=r.criteria,R=o.criteria,f=g.length,h=i.length;++m<f;){var b=e(g[m],R[m]);if(b){if(m>=h)return b;var C=i[m];return b*(C=="desc"?-1:1)}}return r.index-o.index}p.exports=n},52593:(p,x,t)=>{var e=t(47727);function n(r,o){return function(i,m){if(i==null)return i;if(!e(i))return r(i,m);for(var g=i.length,R=o?g:-1,f=Object(i);(o?R--:++R<g)&&m(f[R],R,f)!==!1;);return i}}p.exports=n},51425:p=>{function x(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}p.exports=x},58422:(p,x,t)=>{var e=t(36393),n=t(90040),r=t(92403),o=t(26126);function i(m,g){var R=o(m)?e:r;return R(m,n(g,3))}p.exports=i},51006:(p,x,t)=>{var e=t(93367),n=t(16429),r=t(52431),o=t(65145),i=r(function(m,g){if(m==null)return[];var R=g.length;return R>1&&o(m,g[0],g[1])?g=[]:R>2&&o(g[0],g[1],g[2])&&(g=[g[0]]),n(m,e(g,1),[])});p.exports=i},34049:(p,x,t)=>{var e=t(20454);function n(r){var o=r==null?0:r.length;return o?e(r,1,o):[]}p.exports=n},41942:(p,x,t)=>{var e=t(20454),n=t(69740);function r(o,i,m){return o&&o.length?(i=m||i===void 0?1:n(i),e(o,0,i<0?0:i)):[]}p.exports=r},87366:(p,x,t)=>{var e=t(19975),n=t(52431),r=t(99662),o=n(function(i,m){return r(i)?e(i,m):[]});p.exports=o}}]);
