"use strict";(self.webpackChunkcmssample=self.webpackChunkcmssample||[]).push([[7974],{21289:(G,d,t)=>{t.d(d,{I:()=>e,U:()=>n});const e="strapi_stage",n="strapi_assignee"},72026:(G,d,t)=>{t.r(d),t.d(d,{InformationBoxEE:()=>ee});var e=t(27279),n=t(57537),r=t(50236),v=t(1821),o=t(10701),T=t(8295),u=t(61121),i=t(61020),g=t(40464),C=t(49402),m=t(21892),O=t(54920),M=t(36364),a=t(21289);function N(){const{initialData:E,layout:{uid:A},isSingleType:W,onChange:K}=(0,n.useCMEditViewDataManager)(),$=(0,C.v9)(M._),{formatMessage:l}=(0,i.Z)(),{formatAPIError:Z}=(0,n.useAPIErrorHandler)(),p=(0,n.useNotification)(),{put:H}=(0,n.useFetchClient)(),{allowedActions:{canReadUsers:w},isLoading:R}=(0,n.useRBAC)({readUsers:$.settings.users.read}),{users:F,isLoading:U,isError:Y}=(0,O.R)({},{enabled:!R&&w}),I=E?.[a.U]??null,L=async({value:c})=>{f.mutate({entityId:E.id,assigneeId:parseInt(c,10),uid:A})},f=(0,g.useMutation)(async({entityId:c,assigneeId:z,uid:J})=>{const h=W?"single-types":"collection-types",{data:{data:y}}=await H(`/admin/content-manager/${h}/${J}/${c}/assignee`,{data:{id:z}});return K({target:{name:a.U,value:y[a.U]}},!0),y},{onSuccess(){p({type:"success",message:{id:"content-manager.reviewWorkflows.assignee.notification.saved",defaultMessage:"Assignee updated"}})}});return e.createElement(v.g,{name:a.U,id:a.U},e.createElement(o.k,{direction:"column",gap:2,alignItems:"stretch"},e.createElement(T.hQ,{clearLabel:l({id:"content-manager.reviewWorkflows.assignee.clear",defaultMessage:"Clear assignee"}),error:Y&&w&&l({id:"content-manager.reviewWorkflows.assignee.error",defaultMessage:"An error occurred while fetching users"})||f.error&&Z(f.error),disabled:!R&&!U&&F.length===0,name:a.U,id:a.U,value:I?I.id:null,onChange:c=>L({value:c}),onClear:()=>L({value:null}),placeholder:l({id:"content-manager.reviewWorkflows.assignee.placeholder",defaultMessage:"Select \u2026"}),label:l({id:"content-manager.reviewWorkflows.assignee.label",defaultMessage:"Assignee"}),loading:U||R||f.isLoading},F.map(c=>e.createElement(u.O,{key:c.id,value:c.id,textValue:(0,m.Gf)(c,l)},(0,m.Gf)(c,l))))))}var D=t(63738),B=t(21395),P=t(77970),k=t(67588),x=t(55911),Q=t(75021),S=t(38705),s=t(86978);function b({id:E,layout:A}={},W={}){const{kind:K,uid:$}=A,l=K==="collectionType"?"collection-types":"single-types",{get:Z}=(0,n.useFetchClient)(),{data:p,isLoading:H,refetch:w}=(0,g.useQuery)(["content-manager",l,A.uid,E,"stages"],async()=>{const{data:U}=await Z(`/admin/content-manager/${l}/${$}/${E}/stages`);return U},W),R=e.useMemo(()=>p?.meta??{},[p?.meta]),F=e.useMemo(()=>p?.data??[],[p?.data]);return{meta:R,stages:F,isLoading:H,refetch:w}}var V=t(5318);function X(){const{initialData:E,layout:A,isSingleType:W,onChange:K}=(0,n.useCMEditViewDataManager)(),{put:$}=(0,n.useFetchClient)(),{formatMessage:l}=(0,i.Z)(),{formatAPIError:Z}=(0,n.useAPIErrorHandler)(),p=(0,n.useNotification)(),{meta:H,stages:w,isLoading:R,refetch:F}=b({id:E.id,layout:A},{enabled:!!E?.id}),{getFeature:U}=(0,Q.q)(),[Y,I]=e.useState(!1),L=U("review-workflows"),f=E?.[a.I]??null,c=(0,g.useMutation)(async({entityId:h,stageId:y,uid:j})=>{const q=W?"single-types":"collection-types",{data:{data:_}}=await $(`/admin/content-manager/${q}/${j}/${h}/stage`,{data:{id:y}});return K({target:{name:a.I,value:_[a.I]}},!0),await F(),_},{onSuccess(){p({type:"success",message:{id:"content-manager.reviewWorkflows.stage.notification.saved",defaultMessage:"Review stage updated"}})}}),z=async({value:h})=>{try{L?.[s.Ef]&&parseInt(L[s.Ef],10)<H.workflowCount?I("workflow"):L?.[s._X]&&parseInt(L[s._X],10)<w.length?I("stage"):c.mutateAsync({entityId:E.id,stageId:h,uid:A.uid})}catch{}},{themeColorName:J}=f?.color?(0,V.k)(f?.color):{};return e.createElement(e.Fragment,null,e.createElement(v.g,{hint:w.length===0&&l({id:"content-manager.reviewWorkflows.stages.no-transition",defaultMessage:"You don\u2019t have the permission to update this stage."}),name:a.I,id:a.I},e.createElement(o.k,{direction:"column",gap:2,alignItems:"stretch"},e.createElement(D.q4,{disabled:w.length===0,error:c.error&&Z(c.error)||null,name:a.I,id:a.I,value:f?.id,onChange:h=>z({value:h}),label:l({id:"content-manager.reviewWorkflows.stage.label",defaultMessage:"Review stage"}),startIcon:f&&e.createElement(o.k,{as:"span",height:2,background:f?.color,borderColor:J==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2,marginRight:"-3px"}),customizeContent:()=>e.createElement(o.k,{as:"span",justifyContent:"space-between",alignItems:"center",width:"100%"},e.createElement(B.Z,{textColor:"neutral800",ellipsis:!0},f?.name??""),R?e.createElement(P.a,{small:!0,style:{display:"flex"},"data-testid":"loader"}):null)},w.map(({id:h,color:y,name:j})=>{const{themeColorName:q}=(0,V.k)(y);return e.createElement(D.ag,{key:h,startIcon:e.createElement(o.k,{height:2,background:y,borderColor:q==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2}),value:h,textValue:j},j)})),e.createElement(k.J,null),e.createElement(x.c,null))),e.createElement(S.fC,{isOpen:Y==="workflow",onClose:()=>I(!1)},e.createElement(S.Dx,null,l({id:"content-manager.reviewWorkflows.workflows.limit.title",defaultMessage:"You\u2019ve reached the limit of workflows in your plan"})),e.createElement(S.uT,null,l({id:"content-manager.reviewWorkflows.workflows.limit.body",defaultMessage:"Delete a workflow or contact Sales to enable more workflows."}))),e.createElement(S.fC,{isOpen:Y==="stage",onClose:()=>I(!1)},e.createElement(S.Dx,null,l({id:"content-manager.reviewWorkflows.stages.limit.title",defaultMessage:"You have reached the limit of stages for this workflow in your plan"})),e.createElement(S.uT,null,l({id:"content-manager.reviewWorkflows.stages.limit.body",defaultMessage:"Try deleting some stages or contact Sales to enable more stages."}))))}function ee(){const{isCreatingEntry:E,layout:{options:A}}=(0,n.useCMEditViewDataManager)(),W=A?.reviewWorkflows??!1;return e.createElement(r.d.Root,null,e.createElement(r.d.Title,null),W&&!E&&e.createElement(e.Fragment,null,e.createElement(X,null),e.createElement(N,null)),e.createElement(r.d.Body,null))}},75021:(G,d,t)=>{t.d(d,{q:()=>v});var e=t(27279),n=t(57537),r=t(40464);function v({enabled:o}={enabled:!0}){const{get:T}=(0,n.useFetchClient)(),{data:u,isError:i,isLoading:g}=(0,r.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:O}}=await T("/admin/license-limit-information");return O},{enabled:o}),C=e.useMemo(()=>u??{},[u]),m=e.useCallback(O=>(C?.features??[]).find(a=>a.name===O)?.options??{},[C?.features]);return{license:C,getFeature:m,isError:i,isLoading:g}}},38705:(G,d,t)=>{t.d(d,{uT:()=>k,fC:()=>S,Dx:()=>P});var e=t(27279),n=t(21395),r=t(10701),v=t(5938),o=t(15244),T=t(93415),u=t(4987),i=t(37370),g=t(95066),C=t(70627),m=t.n(C),O=t(61020),M=t(72450);const a=t.p+"0cd5f8915b265d5b1856.png",N="limits-title",D="https://strapi.io/pricing-cloud",B="https://strapi.io/contact-sales";function P({children:s}){return e.createElement(n.Z,{variant:"alpha",id:N},s)}P.propTypes={children:m().node.isRequired};function k({children:s}){return e.createElement(n.Z,{variant:"omega"},s)}k.propTypes={children:m().node.isRequired};function x(){const{formatMessage:s}=(0,O.Z)();return e.createElement(r.k,{gap:2,paddingTop:4},e.createElement(i.Q,{variant:"default",isExternal:!0,href:D},s({id:"Settings.review-workflows.limit.cta.learn",defaultMessage:"Learn more"})),e.createElement(i.Q,{variant:"tertiary",isExternal:!0,href:B},s({id:"Settings.review-workflows.limit.cta.sales",defaultMessage:"Contact Sales"})))}const Q=M.default.img`
  // Margin top|right reverse the padding of ModalBody
  margin-right: ${({theme:s})=>`-${s.spaces[7]}`};
  margin-top: ${({theme:s})=>`-${s.spaces[7]}`};
  width: 360px;
`;function S({children:s,isOpen:b,onClose:V}){const{formatMessage:X}=(0,O.Z)();return b?e.createElement(v.P,{labelledBy:N},e.createElement(o.f,null,e.createElement(r.k,{gap:2,paddingLeft:7,position:"relative"},e.createElement(r.k,{alignItems:"start",direction:"column",gap:2,width:"60%"},s,e.createElement(x,null)),e.createElement(r.k,{justifyContent:"end",height:"100%",width:"40%"},e.createElement(Q,{src:a,"aria-hidden":!0,alt:"",loading:"lazy"}),e.createElement(T.x,{display:"flex",position:"absolute",right:0,top:0},e.createElement(u.h,{icon:e.createElement(g.Z,null),"aria-label":X({id:"global.close",defaultMessage:"Close"}),onClick:V})))))):null}S.defaultProps={isOpen:!1},S.propTypes={children:m().node.isRequired,isOpen:m().bool,onClose:m().func.isRequired}},86978:(G,d,t)=>{t.d(d,{$k:()=>a,Ef:()=>k,FT:()=>B,Nj:()=>O,Ot:()=>C,QM:()=>i,VS:()=>N,_X:()=>x,bc:()=>m,gu:()=>r,k_:()=>M,lv:()=>D,qZ:()=>u,rg:()=>o,sN:()=>n,uL:()=>P,x4:()=>g,yq:()=>v,zn:()=>T});var e=t(97003);const n="settings_review-workflows",r="Settings/Review_Workflows/RESET_WORKFLOW",v="Settings/Review_Workflows/SET_CONTENT_TYPES",o="Settings/Review_Workflows/SET_IS_LOADING",T="Settings/Review_Workflows/SET_ROLES",u="Settings/Review_Workflows/SET_WORKFLOW",i="Settings/Review_Workflows/SET_WORKFLOWS",g="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",C="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",m="Settings/Review_Workflows/WORKFLOW_CLONE_STAGE",O="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",M="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGES",a="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",N="Settings/Review_Workflows/WORKFLOW_UPDATE",D={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},B=e.W.colors.primary600,P={STAGE:"stage"},k="numberOfWorkflows",x="stagesPerWorkflow"},5318:(G,d,t)=>{t.d(d,{k:()=>r,s:()=>v});var e=t(97003),n=t(86978);function r(o){if(!o)return null;const u=Object.entries(e.W.colors).filter(([,i])=>i.toUpperCase()===o.toUpperCase()).reduce((i,[g])=>(n.lv?.[g]&&(i=g),i),null);return u?{themeColorName:u,name:n.lv[u]}:null}function v(){return Object.entries(n.lv).map(([o,T])=>({hex:e.W.colors[o].toUpperCase(),name:T}))}}}]);
