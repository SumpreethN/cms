(self.webpackChunkcmssample=self.webpackChunkcmssample||[]).push([[7707],{51754:(T,v,e)=>{"use strict";e.d(v,{F:()=>u});var t=e(27279),s=e(57537),a=e(61020),m=e(40464);const u=(n={},p={})=>{const{id:o="",...i}=n,{get:r}=(0,s.useFetchClient)(),{locale:d}=(0,a.Z)(),f=(0,s.useCollator)(d,{sensitivity:"base"}),{data:E,error:y,isError:l,isLoading:S,refetch:W}=(0,m.useQuery)(["roles",o,i],async()=>{const{data:O}=await r(`/admin/roles/${o??""}`,{params:i});return O},p);return{roles:t.useMemo(()=>{let O=[];return o&&E?O=[E.data]:Array.isArray(E?.data)&&(O=E.data),[...O].sort((C,N)=>f.compare(C.name,N.name))},[E,o,f]),error:y,isError:l,isLoading:S,refetch:W}}},79194:(T,v,e)=>{"use strict";e.d(v,{v:()=>a});var t=e(27279),s=e(49402);function a(m,u){const n=(0,s.oR)();(0,t.useEffect)(()=>{n.injectReducer(m,u)},[n,m,u])}},75021:(T,v,e)=>{"use strict";e.d(v,{q:()=>m});var t=e(27279),s=e(57537),a=e(40464);function m({enabled:u}={enabled:!0}){const{get:n}=(0,s.useFetchClient)(),{data:p,isError:o,isLoading:i}=(0,a.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:f}}=await n("/admin/license-limit-information");return f},{enabled:u}),r=t.useMemo(()=>p??{},[p]),d=t.useCallback(f=>(r?.features??[]).find(y=>y.name===f)?.options??{},[r?.features]);return{license:r,getFeature:d,isError:o,isLoading:i}}},11984:(T,v,e)=>{"use strict";e.d(v,{CI:()=>n,ES:()=>s,FP:()=>i,Js:()=>d,Lk:()=>E,Mu:()=>o,PP:()=>m,Pz:()=>f,_V:()=>u,fC:()=>a,rI:()=>r,wt:()=>y,xn:()=>p});var t=e(86978);function s(l){return{type:t.bc,payload:{id:l}}}function a({workflow:l}){return{type:t.qZ,payload:l}}function m({workflows:l}){return{type:t.QM,payload:l}}function u(l){return{type:t.x4,payload:{stageId:l}}}function n(l={}){return{type:t.Ot,payload:l}}function p(l,S){return{type:t.Nj,payload:{stageId:l,...S}}}function o(l){return{type:t.k_,payload:l}}function i(l,S){return{type:t.$k,payload:{newIndex:S,oldIndex:l}}}function r(l){return{type:t.VS,payload:l}}function d(){return{type:t.gu}}function f(l){return{type:t.yq,payload:l}}function E(l){return{type:t.zn,payload:l}}function y(l){return{type:t.rg,payload:l}}},43390:(T,v,e)=>{"use strict";e.d(v,{eJ:()=>P,lx:()=>C,h4:()=>w,fC:()=>N});var t=e(27279),s=e(27997),a=e(9941),m=e(74758),u=e(27875),n=e(57537),p=e(76827),o=e(61020),i=e(52713),r=e(86978),d=e(10701),f=e(21395),E=e(10411),y=e(70627),l=e.n(y),S=e(72450);const W=(0,S.default)(d.k)`
  svg path {
    fill: ${({theme:M})=>M.colors.neutral600};
  }
`;function R({name:M}){return t.createElement(d.k,{background:"primary100",borderStyle:"dashed",borderColor:"primary600",borderWidth:"1px",gap:3,hasRadius:!0,padding:3,shadow:"tableShadow",width:(0,n.pxToRem)(300)},t.createElement(W,{alignItems:"center",background:"neutral200",borderRadius:"50%",height:6,justifyContent:"center",width:6},t.createElement(E.Z,{width:`${8/16}rem`})),t.createElement(f.Z,{fontWeight:"bold"},M))}R.propTypes={name:l().string.isRequired};function O({type:M,item:I}){switch(M){case r.uL.STAGE:return t.createElement(R,{...I});default:return null}}function C(){return t.createElement(i.r,{renderItem:O})}function N({children:M}){return t.createElement(s.A,null,t.createElement(a.o,{tabIndex:-1},t.createElement(m.D,null,M)))}function P({href:M}){const{formatMessage:I}=(0,o.Z)();return t.createElement(n.Link,{startIcon:t.createElement(p.Z,null),to:M},I({id:"global.back",defaultMessage:"Back"}))}function w({title:M,subtitle:I,navigationAction:F,primaryAction:x}){return t.createElement(t.Fragment,null,t.createElement(n.SettingsPageTitle,{name:M}),t.createElement(u.T,{navigationAction:F,primaryAction:x,title:M,subtitle:I}))}},38705:(T,v,e)=>{"use strict";e.d(v,{uT:()=>O,fC:()=>P,Dx:()=>R});var t=e(27279),s=e(21395),a=e(10701),m=e(5938),u=e(15244),n=e(93415),p=e(4987),o=e(37370),i=e(95066),r=e(70627),d=e.n(r),f=e(61020),E=e(72450);const y=e.p+"0cd5f8915b265d5b1856.png",l="limits-title",S="https://strapi.io/pricing-cloud",W="https://strapi.io/contact-sales";function R({children:w}){return t.createElement(s.Z,{variant:"alpha",id:l},w)}R.propTypes={children:d().node.isRequired};function O({children:w}){return t.createElement(s.Z,{variant:"omega"},w)}O.propTypes={children:d().node.isRequired};function C(){const{formatMessage:w}=(0,f.Z)();return t.createElement(a.k,{gap:2,paddingTop:4},t.createElement(o.Q,{variant:"default",isExternal:!0,href:S},w({id:"Settings.review-workflows.limit.cta.learn",defaultMessage:"Learn more"})),t.createElement(o.Q,{variant:"tertiary",isExternal:!0,href:W},w({id:"Settings.review-workflows.limit.cta.sales",defaultMessage:"Contact Sales"})))}const N=E.default.img`
  // Margin top|right reverse the padding of ModalBody
  margin-right: ${({theme:w})=>`-${w.spaces[7]}`};
  margin-top: ${({theme:w})=>`-${w.spaces[7]}`};
  width: 360px;
`;function P({children:w,isOpen:M,onClose:I}){const{formatMessage:F}=(0,f.Z)();return M?t.createElement(m.P,{labelledBy:l},t.createElement(u.f,null,t.createElement(a.k,{gap:2,paddingLeft:7,position:"relative"},t.createElement(a.k,{alignItems:"start",direction:"column",gap:2,width:"60%"},w,t.createElement(C,null)),t.createElement(a.k,{justifyContent:"end",height:"100%",width:"40%"},t.createElement(N,{src:y,"aria-hidden":!0,alt:"",loading:"lazy"}),t.createElement(n.x,{display:"flex",position:"absolute",right:0,top:0},t.createElement(p.h,{icon:t.createElement(i.Z,null),"aria-label":F({id:"global.close",defaultMessage:"Close"}),onClick:I})))))):null}P.defaultProps={isOpen:!1},P.propTypes={children:d().node.isRequired,isOpen:d().bool,onClose:d().func.isRequired}},68997:(T,v,e)=>{"use strict";e.d(v,{U:()=>ae});var t=e(27279),s=e(93415),a=e(10701),m=e(57537),u=e(70627),n=e.n(u),p=e(61020),o=e(49402),i=e(72450),r=e(11984),d=e(21395),f=e(77225);const E=(0,i.default)(f.Z)`
  > circle {
    fill: ${({theme:c})=>c.colors.neutral150};
  }
  > path {
    fill: ${({theme:c})=>c.colors.neutral600};
  }
`,y=(0,i.default)(s.x)`
  border-radius: 26px;

  svg {
    height: ${({theme:c})=>c.spaces[6]};
    width: ${({theme:c})=>c.spaces[6]};

    > path {
      fill: ${({theme:c})=>c.colors.neutral600};
    }
  }

  &:hover {
    color: ${({theme:c})=>c.colors.primary600} !important;
    ${d.Z} {
      color: ${({theme:c})=>c.colors.primary600} !important;
    }

    ${E} {
      > circle {
        fill: ${({theme:c})=>c.colors.primary600};
      }
      > path {
        fill: ${({theme:c})=>c.colors.neutral100};
      }
    }
  }

  &:active {
    ${d.Z} {
      color: ${({theme:c})=>c.colors.primary600};
    }

    ${E} {
      > circle {
        fill: ${({theme:c})=>c.colors.primary600};
      }
      > path {
        fill: ${({theme:c})=>c.colors.neutral100};
      }
    }
  }
`;function l({children:c,...b}){return t.createElement(y,{as:"button",background:"neutral0",border:"neutral150",paddingBottom:3,paddingLeft:4,paddingRight:4,paddingTop:3,shadow:"filterShadow",...b},t.createElement(a.k,{gap:2},t.createElement(E,{"aria-hidden":!0}),t.createElement(d.Z,{variant:"pi",fontWeight:"bold",textColor:"neutral500"},c)))}l.propTypes={children:n().node.isRequired};var S=e(97232),W=e(4987),R=e(10989),O=e(45322),C=e(24920),N=e(34642),P=e(23298),w=e(74577),M=e(12881),I=e(63738),F=e(69933),x=e(16885),J=e(75438),q=e(33039),j=e(78031),Z=e(71563),_=e(92241),ee=e(21440),h=e(21892),D=e(86978),te=e(65649),L=e(5318);const fe=(0,i.default)(S.ML)`
  padding-left: ${({theme:c})=>c.spaces[7]};
`,pe=(0,i.default)(a.k)`
  > * {
    flex-grow: 1;
  }
`,Ee=(0,i.default)(F.sN)`
  color: ${({theme:c})=>c.colors.danger600};
`,ve=(0,i.default)(x.xz)`
  :hover,
  :focus {
    background-color: ${({theme:c})=>c.colors.neutral100};
  }

  > span {
    font-size: 0;
  }
`,ye=(0,i.default)(W.h)`
  align-items: center;
  border-radius: ${({theme:c})=>c.borderRadius};
  display: flex;
  justify-content: center;

  :hover,
  :focus {
    background-color: ${({theme:c})=>c.colors.neutral100};
  }

  svg {
    height: auto;
    width: ${({theme:c})=>c.spaces[3]}};
  }
`,he=(0,L.s)();function Se(){return t.createElement(s.x,{background:"primary100",borderStyle:"dashed",borderColor:"primary600",borderWidth:"1px",display:"block",hasRadius:!0,padding:6,shadow:"tableShadow"})}function le({id:c,index:b,canDelete:$,canReorder:ne,canUpdate:B,isOpen:se=!1,stagesCount:V}){const H=g=>`${g+1} of ${V}`,z=g=>{Q(A({id:"dnd.grab-item",defaultMessage:"{item}, grabbed. Current position in list: {position}. Press up and down arrow to change position, Spacebar to drop, Escape to cancel."},{item:K.value,position:H(g)}))},Te=g=>{Q(A({id:"dnd.drop-item",defaultMessage:"{item}, dropped. Final position in list: {position}."},{item:K.value,position:H(g)}))},Oe=()=>{Q(A({id:"dnd.cancel-item",defaultMessage:"{item}, dropped. Re-order cancelled."},{item:K.value}))},Me=(g,k)=>{Q(A({id:"dnd.reorder",defaultMessage:"{item}, moved. New position in list: {position}."},{item:K.value,position:H(g)})),U((0,r.FP)(k,g))},Re=()=>{re(!0)},[ie,Q]=t.useState(null),{formatMessage:A}=(0,p.Z)(),{trackUsage:Ce}=(0,m.useTracking)(),U=(0,o.I0)(),Ae=(0,m.useNotification)(),[oe,We]=t.useState(se),[Ie,re]=t.useState(!1),[K,ce,ke]=(0,Z.useField)(`stages.${b}.name`),[Y,de,Pe]=(0,Z.useField)(`stages.${b}.color`),[G,ue,De]=(0,Z.useField)(`stages.${b}.permissions`),Le=(0,o.v9)(te.g$),[{handlerId:be,isDragging:Ne,handleKeyDown:xe},Be,Fe,Ke,ge]=(0,ee.Y9)(ne,{index:b,item:{name:K.value},onGrabItem:z,onDropItem:Te,onMoveItem:Me,onCancel:Oe,type:D.uL.STAGE}),$e=(0,h.FE)(Be,Fe),Ue=he.map(({hex:g,name:k})=>({value:g,label:A({id:"Settings.review-workflows.stage.color.name",defaultMessage:"{name}"},{name:k}),color:g})),{themeColorName:Ge}=(0,L.k)(Y.value)??{},me=Le.filter(g=>g.code!=="strapi-super-admin");return t.useEffect(()=>{ge((0,_.rX)(),{captureDraggingState:!1})},[ge,b]),t.createElement(s.x,{ref:$e},ie&&t.createElement(R.T,{"aria-live":"assertive"},ie),Ne?t.createElement(Se,null):t.createElement(O.U,{size:"S",variant:"primary",onToggle:()=>{We(!oe),oe||Ce("willEditStage")},expanded:oe,shadow:"tableShadow",error:ce.error??de?.error??ue?.error??!1,hasErrorMessage:!1},t.createElement(C.B,{title:K.value,togglePosition:"left",action:($||B)&&t.createElement(a.k,null,t.createElement(x.fC,null,t.createElement(ve,{size:"S",endIcon:null,paddingLeft:2,paddingRight:2},t.createElement(J.Z,{"aria-hidden":!0,focusable:!1}),t.createElement(R.T,{as:"span"},A({id:"[tbdb].components.DynamicZone.more-actions",defaultMessage:"More actions"}))),t.createElement(x.VY,{popoverPlacement:"bottom-end",zIndex:2},t.createElement(x.rl,null,B&&t.createElement(F.sN,{onClick:()=>U((0,r.ES)(c))},A({id:"Settings.review-workflows.stage.delete",defaultMessage:"Duplicate stage"})),$&&t.createElement(Ee,{onClick:()=>U((0,r._V)(c))},A({id:"Settings.review-workflows.stage.delete",defaultMessage:"Delete"}))))),B&&t.createElement(ye,{background:"transparent",forwardedAs:"div",hasRadius:!0,role:"button",noBorder:!0,tabIndex:0,"data-handler-id":be,ref:Ke,label:A({id:"Settings.review-workflows.stage.drag",defaultMessage:"Drag"}),onClick:g=>g.stopPropagation(),onKeyDown:xe},t.createElement(q.Z,null)))}),t.createElement(N.v,{padding:6,background:"neutral0",hasRadius:!0},t.createElement(P.r,{gap:4},t.createElement(w.P,{col:6},t.createElement(M.o,{...K,id:K.name,disabled:!B,label:A({id:"Settings.review-workflows.stage.name.label",defaultMessage:"Stage name"}),error:ce.error??!1,onChange:g=>{ke.setValue(g.target.value),U((0,r.xn)(c,{name:g.target.value}))},required:!0})),t.createElement(w.P,{col:6},t.createElement(I.q4,{disabled:!B,error:de?.error??!1,id:Y.name,required:!0,label:A({id:"content-manager.reviewWorkflows.stage.color",defaultMessage:"Color"}),onChange:g=>{Pe.setValue(g),U((0,r.xn)(c,{color:g}))},value:Y.value.toUpperCase(),startIcon:t.createElement(a.k,{as:"span",height:2,background:Y.value,borderColor:Ge==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2})},Ue.map(({value:g,label:k,color:X})=>{const{themeColorName:Ze}=(0,L.k)(X);return t.createElement(I.ag,{value:g,key:g,startIcon:t.createElement(a.k,{as:"span",height:2,background:X,borderColor:Ze==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2})},k)}))),t.createElement(w.P,{col:6},me.length===0?t.createElement(m.NotAllowedInput,{description:{id:"Settings.review-workflows.stage.permissions.noPermissions.description",defaultMessage:"You don\u2019t have the permission to see roles"},intlLabel:{id:"Settings.review-workflows.stage.permissions.label",defaultMessage:"Roles that can change this stage"},name:G.name}):t.createElement(a.k,{alignItems:"flex-end",gap:3},t.createElement(pe,{grow:1},t.createElement(S.NU,{...G,disabled:!B,error:ue.error??!1,id:G.name,label:A({id:"Settings.review-workflows.stage.permissions.label",defaultMessage:"Roles that can change this stage"}),onChange:g=>{const k=g.map(X=>({role:parseInt(X,10),action:"admin::review-workflows.stage.transition"}));De.setValue(k),U((0,r.xn)(c,{permissions:k}))},placeholder:A({id:"Settings.review-workflows.stage.permissions.placeholder",defaultMessage:"Select a role"}),required:!0,value:(G.value??[]).map(g=>`${g.role}`),withTags:!0},[{label:A({id:"Settings.review-workflows.stage.permissions.allRoles.label",defaultMessage:"All roles"}),children:me.map(g=>({value:`${g.id}`,label:g.name}))}].map(g=>"children"in g?t.createElement(S.Ab,{key:g.label,label:g.label,values:g.children.map(k=>k.value)},g.children.map(k=>t.createElement(fe,{key:k.value,value:k.value},k.label))):t.createElement(S.ML,{key:g.value,value:g.value},g.label)))),t.createElement(W.h,{disabled:!B,icon:t.createElement(j.Z,null),label:A({id:"Settings.review-workflows.stage.permissions.apply.label",defaultMessage:"Apply to all stages"}),size:"L",variant:"secondary",onClick:()=>Re(G.value)})))))),t.createElement(m.ConfirmDialog.Root,{iconRightButton:null,isOpen:Ie,onToggleDialog:()=>re(!1),onConfirm:()=>{U((0,r.Mu)({permissions:G.value})),re(!1),Ae({type:"success",message:A({id:"Settings.review-workflows.page.edit.confirm.stages.permissions.copy.success",defaultMessage:"Applied roles to all other stages of the workflow"})})},variantRightButton:"primary"},t.createElement(m.ConfirmDialog.Body,null,t.createElement(d.Z,{textAlign:"center",variant:"omega"},A({id:"Settings.review-workflows.page.edit.confirm.stages.permissions.copy",defaultMessage:"Roles that can change that stage will be applied to all the other stages."})))))}le.propTypes=n().shape({id:n().number.isRequired,color:n().string.isRequired,canDelete:n().bool.isRequired,canReorder:n().bool.isRequired,canUpdate:n().bool.isRequired,stagesCount:n().number.isRequired}).isRequired;const we=(0,i.default)(s.x)`
  transform: translateX(-50%);
`;function ae({canDelete:c,canUpdate:b,stages:$}){const{formatMessage:ne}=(0,p.Z)(),B=(0,o.I0)(),{trackUsage:se}=(0,m.useTracking)();return t.createElement(a.k,{direction:"column",gap:6,width:"100%"},t.createElement(s.x,{position:"relative",spacing:4,width:"100%"},t.createElement(we,{background:"neutral200",height:"100%",left:"50%",position:"absolute",top:"0",width:2,zIndex:1}),t.createElement(a.k,{direction:"column",alignItems:"stretch",gap:6,zIndex:2,position:"relative",as:"ol"},$.map((V,H)=>{const z=V?.id??V.__temp_key__;return t.createElement(s.x,{key:`stage-${z}`,as:"li"},t.createElement(le,{id:z,index:H,isOpen:!V.id,canDelete:$.length>1&&c,canReorder:$.length>1,canUpdate:b,stagesCount:$.length}))}))),b&&t.createElement(l,{type:"button",onClick:()=>{B((0,r.CI)({name:""})),se("willCreateStage")}},ne({id:"Settings.review-workflows.stage.add",defaultMessage:"Add new stage"})))}ae.defaultProps={canDelete:!0,canUpdate:!0,stages:[]},ae.propTypes={canDelete:n().bool,canUpdate:n().bool,stages:n().arrayOf(n().shape({id:n().number,__temp_key__:n().number,name:n().string.isRequired}))}},85230:(T,v,e)=>{"use strict";e.d(v,{Y:()=>R});var t=e(27279),s=e(97232),a=e(21395),m=e(23298),u=e(74577),n=e(12881),p=e(57537),o=e(71563),i=e(70627),r=e.n(i),d=e(61020),f=e(49402),E=e(72450),y=e(11984),l=e(65649);const S=(0,E.default)(s.ML)`
  padding-left: ${({theme:O})=>O.spaces[7]};
`,W=(0,E.default)(a.Z)`
  font-style: italic;
`;function R({canUpdate:O}){const{formatMessage:C,locale:N}=(0,d.Z)(),P=(0,f.I0)(),{collectionTypes:w,singleTypes:M}=(0,f.v9)(l.HK),I=(0,f.v9)(l.DV),F=(0,f.v9)(l.D6),[x,J,q]=(0,o.useField)("name"),[j,Z,_]=(0,o.useField)("contentTypes"),ee=(0,p.useCollator)(N,{sensitivity:"base"});return t.createElement(m.r,{background:"neutral0",hasRadius:!0,gap:4,padding:6,shadow:"tableShadow"},t.createElement(u.P,{col:6},t.createElement(n.o,{...x,id:x.name,disabled:!O,label:C({id:"Settings.review-workflows.workflow.name.label",defaultMessage:"Workflow Name"}),error:J.error??!1,onChange:h=>{P((0,y.rI)({name:h.target.value})),q.setValue(h.target.value)},required:!0})),t.createElement(u.P,{col:6},t.createElement(s.NU,{...j,customizeContent:h=>C({id:"Settings.review-workflows.workflow.contentTypes.displayValue",defaultMessage:"{count} {count, plural, one {content type} other {content types}} selected"},{count:h.length}),disabled:!O,error:Z.error??!1,id:j.name,label:C({id:"Settings.review-workflows.workflow.contentTypes.label",defaultMessage:"Associated to"}),onChange:h=>{P((0,y.rI)({contentTypes:h})),_.setValue(h)},placeholder:C({id:"Settings.review-workflows.workflow.contentTypes.placeholder",defaultMessage:"Select"})},[...w.length>0?[{label:C({id:"Settings.review-workflows.workflow.contentTypes.collectionTypes.label",defaultMessage:"Collection Types"}),children:[...w].sort((h,D)=>ee.compare(h.info.displayName,D.info.displayName)).map(h=>({label:h.info.displayName,value:h.uid}))}]:[],...M.length>0?[{label:C({id:"Settings.review-workflows.workflow.contentTypes.singleTypes.label",defaultMessage:"Single Types"}),children:[...M].map(h=>({label:h.info.displayName,value:h.uid}))}]:[]].map(h=>"children"in h?t.createElement(s.Ab,{key:h.label,label:h.label,values:h.children.map(D=>D.value.toString())},h.children.map(D=>{const{name:te}=F.find(L=>(I&&L.id!==I.id||!I)&&L.contentTypes.includes(D.value))??{};return t.createElement(S,{key:D.value,value:D.value},C({id:"Settings.review-workflows.workflow.contentTypes.assigned.notice",defaultMessage:"{label} {name, select, undefined {} other {<i>(assigned to <em>{name}</em> workflow)</i>}}"},{label:D.label,name:te,em:(...L)=>t.createElement(a.Z,{as:"em",fontWeight:"bold"},L),i:(...L)=>t.createElement(W,null,L)}))})):t.createElement(s.ML,{key:h.value,value:h.value},h.label)))))}R.defaultProps={canUpdate:!0},R.propTypes={canUpdate:r().bool}},86978:(T,v,e)=>{"use strict";e.d(v,{$k:()=>y,Ef:()=>O,FT:()=>W,Nj:()=>f,Ot:()=>r,QM:()=>o,VS:()=>l,_X:()=>C,bc:()=>d,gu:()=>a,k_:()=>E,lv:()=>S,qZ:()=>p,rg:()=>u,sN:()=>s,uL:()=>R,x4:()=>i,yq:()=>m,zn:()=>n});var t=e(97003);const s="settings_review-workflows",a="Settings/Review_Workflows/RESET_WORKFLOW",m="Settings/Review_Workflows/SET_CONTENT_TYPES",u="Settings/Review_Workflows/SET_IS_LOADING",n="Settings/Review_Workflows/SET_ROLES",p="Settings/Review_Workflows/SET_WORKFLOW",o="Settings/Review_Workflows/SET_WORKFLOWS",i="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",r="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",d="Settings/Review_Workflows/WORKFLOW_CLONE_STAGE",f="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",E="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGES",y="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",l="Settings/Review_Workflows/WORKFLOW_UPDATE",S={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},W=t.W.colors.primary600,R={STAGE:"stage"},O="numberOfWorkflows",C="stagesPerWorkflow"},52258:(T,v,e)=>{"use strict";e.d(v,{n:()=>m});var t=e(27279),s=e(57537),a=e(40464);function m(u={}){const{get:n}=(0,s.useFetchClient)(),{id:p="",...o}=u,i={populate:"stages"},{data:r,isLoading:d,status:f,refetch:E}=(0,a.useQuery)(["review-workflows","workflows",p],async()=>(await n(`/admin/review-workflows/workflows/${p}`,{params:{...i,...o}})).data),y=t.useMemo(()=>p&&r?.data?[r.data]:Array.isArray(r?.data)?r.data:[],[r?.data,p]);return{meta:t.useMemo(()=>r?.meta??{},[r?.meta]),workflows:y,isLoading:d,status:f,refetch:E}}},3848:(T,v,e)=>{"use strict";e.d(v,{E:()=>a,I:()=>m});var t=e(61815),s=e(86978);const a={serverState:{contentTypes:{collectionTypes:[],singleTypes:[]},roles:[],workflow:null,workflows:[]},clientState:{currentWorkflow:{data:{name:"",contentTypes:[],stages:[],permissions:void 0}},isLoading:!0}};function m(n=a,p){return(0,t.Uy)(n,o=>{const{payload:i}=p;switch(p.type){case s.yq:{o.serverState.contentTypes=i;break}case s.rg:{o.clientState.isLoading=i;break}case s.zn:{o.serverState.roles=i;break}case s.qZ:{const r=i;r&&(o.serverState.workflow=r,o.clientState.currentWorkflow.data={...r,stages:r.stages.map(d=>({...d,color:d?.color??s.FT}))});break}case s.QM:{o.serverState.workflows=i;break}case s.gu:{o.clientState=a.clientState,o.serverState=a.serverState;break}case s.x4:{const{stageId:r}=i,{currentWorkflow:d}=n.clientState;o.clientState.currentWorkflow.data.stages=d.data.stages.filter(f=>(f?.id??f.__temp_key__)!==r);break}case s.Ot:{const{currentWorkflow:r}=n.clientState;r.data||(o.clientState.currentWorkflow.data={stages:[]});const d=u(o.clientState.currentWorkflow.data.stages);o.clientState.currentWorkflow.data.stages.push({...i,color:i?.color??s.FT,__temp_key__:d});break}case s.bc:{const{currentWorkflow:r}=n.clientState,{id:d}=i,f=r.data.stages.findIndex(y=>(y?.id??y?.__temp_key__)===d),E=r.data.stages[f];o.clientState.currentWorkflow.data.stages.splice(f+1,0,{...E,id:void 0,__temp_key__:u(o.clientState.currentWorkflow.data.stages)});break}case s.Nj:{const{currentWorkflow:r}=n.clientState,{stageId:d,...f}=i;o.clientState.currentWorkflow.data.stages=r.data.stages.map(E=>(E.id??E.__temp_key__)===d?{...E,...f}:E);break}case s.k_:{const{currentWorkflow:r}=n.clientState;o.clientState.currentWorkflow.data.stages=r.data.stages.map(d=>({...d,...i}));break}case s.$k:{const{currentWorkflow:{data:{stages:r}}}=n.clientState,{newIndex:d,oldIndex:f}=i;if(d>=0&&d<r.length){const E=r[f];let y=[...r];y.splice(f,1),y.splice(d,0,E),o.clientState.currentWorkflow.data.stages=y}break}case s.VS:{o.clientState.currentWorkflow.data={...o.clientState.currentWorkflow.data,...i};break}default:break}})}const u=(n=[])=>{const p=n.map(o=>o.id??o.__temp_key__);return Math.max(...p,-1)+1}},65649:(T,v,e)=>{"use strict";e.d(v,{CA:()=>f,D6:()=>r,DV:()=>i,HK:()=>p,RR:()=>y,bH:()=>d,g$:()=>o,xU:()=>E});var t=e(6078),s=e.n(t),a=e(57150),m=e(86978),u=e(3848);const n=l=>l[m.sN]??u.E,p=(0,a.P1)(n,({serverState:{contentTypes:l}})=>l),o=(0,a.P1)(n,({serverState:{roles:l}})=>l),i=(0,a.P1)(n,({clientState:{currentWorkflow:l}})=>l.data),r=(0,a.P1)(n,({serverState:{workflows:l}})=>l),d=(0,a.P1)(n,({serverState:l,clientState:{currentWorkflow:S}})=>!s()(l.workflow,S.data)),f=(0,a.P1)(n,({serverState:l,clientState:{currentWorkflow:S}})=>!(l.workflow?.stages??[]).every(W=>!!S.data.stages.find(({id:R})=>R===W.id))),E=(0,a.P1)(n,({clientState:{isLoading:l}})=>l),y=(0,a.P1)(n,({serverState:l})=>l)},5318:(T,v,e)=>{"use strict";e.d(v,{k:()=>a,s:()=>m});var t=e(97003),s=e(86978);function a(u){if(!u)return null;const p=Object.entries(t.W.colors).filter(([,o])=>o.toUpperCase()===u.toUpperCase()).reduce((o,[i])=>(s.lv?.[i]&&(o=i),o),null);return p?{themeColorName:p,name:s.lv[p]}:null}function m(){return Object.entries(s.lv).map(([u,n])=>({hex:t.W.colors[u].toUpperCase(),name:n}))}},66578:(T,v,e)=>{"use strict";e.d(v,{V:()=>m});var t=e(43433),s=e.n(t),a=e(47853);async function m({values:u,formatMessage:n}){const p=a.Ry({contentTypes:a.IX().of(a.Z_()),name:a.Z_().max(255,n({id:"Settings.review-workflows.validation.name.max-length",defaultMessage:"Name can not be longer than 255 characters"})).required(),stages:a.IX().of(a.Ry().shape({name:a.Z_().required(n({id:"Settings.review-workflows.validation.stage.name",defaultMessage:"Name is required"})).max(255,n({id:"Settings.review-workflows.validation.stage.max-length",defaultMessage:"Name can not be longer than 255 characters"})).test("unique-name",n({id:"Settings.review-workflows.validation.stage.duplicate",defaultMessage:"Stage name must be unique"}),function(o){const{options:{context:i}}=this;return i.stages.filter(r=>r.name===o).length===1}),color:a.Z_().required(n({id:"Settings.review-workflows.validation.stage.color",defaultMessage:"Color is required"})).matches(/^#(?:[0-9a-fA-F]{3}){1,2}$/i),permissions:a.IX(a.Ry({role:a.Rx().strict().typeError(n({id:"Settings.review-workflows.validation.stage.permissions.role.number",defaultMessage:"Role must be of type number"})).required,action:a.Z_().required({id:"Settings.review-workflows.validation.stage.permissions.action.required",defaultMessage:"Action is a required argument"})})).strict()})).min(1)});try{return await p.validate(u,{abortEarly:!1,context:u}),!0}catch(o){let i={};return o instanceof a.p8&&o.inner.forEach(r=>{s()(i,r.path,r.message)}),i}}},86961:(T,v,e)=>{var t=e(13578),s=e(27138),a="[object Boolean]";function m(u){return u===!0||u===!1||s(u)&&t(u)==a}T.exports=m},92249:(T,v,e)=>{var t=e(37997);function s(a){return t(a)&&a!=+a}T.exports=s},37997:(T,v,e)=>{var t=e(13578),s=e(27138),a="[object Number]";function m(u){return typeof u=="number"||s(u)&&t(u)==a}T.exports=m}}]);
